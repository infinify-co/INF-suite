<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agents - Internal Suite</title>
    <link rel="stylesheet" href="../styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8fafc;
            display: flex;
            min-height: 100vh;
        }

        .internal-sidebar {
            width: 280px;
            background: #ffffff;
            border-right: 1px solid #e5e7eb;
            padding: 32px 0;
            position: fixed;
            left: 0;
            top: 0;
            bottom: 0;
            overflow-y: auto;
        }

        .sidebar-header {
            padding: 0 24px 32px 24px;
            border-bottom: 1px solid #e5e7eb;
            margin-bottom: 24px;
        }

        .sidebar-header h2 {
            font-size: 20px;
            font-weight: 700;
            color: #111827;
            margin: 0 0 4px 0;
        }

        .sidebar-header p {
            font-size: 14px;
            color: #6b7280;
            margin: 0;
        }

        .sidebar-nav {
            padding: 0 16px;
        }

        .sidebar-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
            margin-bottom: 4px;
            text-decoration: none;
            color: inherit;
        }

        .sidebar-item:hover {
            background: #f9fafb;
        }

        .sidebar-item.active {
            background: #eff6ff;
        }

        .sidebar-item-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .sidebar-item-text {
            font-size: 14px;
            font-weight: 500;
            color: #111827;
        }

        .sidebar-item.active .sidebar-item-text {
            color: #2563eb;
            font-weight: 600;
        }

        .internal-container {
            flex: 1;
            margin-left: 280px;
            max-width: calc(100% - 280px);
            padding: 40px;
            display: flex;
            gap: 24px;
        }

        .main-content {
            flex: 1;
            min-width: 0;
        }

        .page-header {
            margin-bottom: 32px;
        }

        .page-header h1 {
            font-size: 32px;
            font-weight: 700;
            color: #111827;
            margin: 0 0 8px 0;
        }

        .page-header p {
            font-size: 16px;
            color: #6b7280;
            margin: 0;
        }

        .agent-workspace {
            background: #ffffff;
            border-radius: 16px;
            padding: 32px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            margin-bottom: 24px;
        }

        .workspace-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .workspace-title {
            font-size: 20px;
            font-weight: 600;
            color: #111827;
        }

        .agent-input-area {
            background: #f9fafb;
            border: 2px dashed #e5e7eb;
            border-radius: 12px;
            padding: 24px;
            min-height: 200px;
            margin-bottom: 24px;
        }

        .agent-input-area textarea {
            width: 100%;
            border: none;
            outline: none;
            background: transparent;
            font-size: 14px;
            color: #111827;
            resize: vertical;
            min-height: 150px;
            font-family: inherit;
        }

        .agent-input-area textarea::placeholder {
            color: #9ca3af;
        }

        .agent-actions {
            display: flex;
            gap: 12px;
        }

        .btn-primary {
            background: #2563eb;
            color: #ffffff;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary:hover {
            background: #1d4ed8;
        }

        .btn-secondary {
            background: #f3f4f6;
            color: #111827;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-secondary:hover {
            background: #e5e7eb;
        }

        .agent-ideas-section {
            background: #ffffff;
            border-radius: 16px;
            padding: 32px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        .ideas-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .ideas-title {
            font-size: 20px;
            font-weight: 600;
            color: #111827;
        }

        .ideas-input-container {
            position: relative;
            margin-bottom: 16px;
        }

        .ideas-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            color: #111827;
            outline: none;
            transition: border-color 0.2s;
        }

        .ideas-input:focus {
            border-color: #2563eb;
        }

        .ideas-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            max-height: 300px;
            overflow-y: auto;
        }

        .idea-item {
            background: #f9fafb;
            padding: 12px 16px;
            border-radius: 8px;
            font-size: 14px;
            color: #111827;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid #e5e7eb;
        }

        .idea-text {
            flex: 1;
        }

        .idea-actions {
            display: flex;
            gap: 8px;
        }

        .btn-icon {
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            transition: background 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-icon:hover {
            background: #e5e7eb;
        }

        .tasks-sidebar {
            width: 320px;
            background: #ffffff;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            height: fit-content;
            position: sticky;
            top: 40px;
        }

        .tasks-header {
            margin-bottom: 24px;
        }

        .tasks-title {
            font-size: 20px;
            font-weight: 600;
            color: #111827;
            margin: 0 0 8px 0;
        }

        .tasks-subtitle {
            font-size: 14px;
            color: #6b7280;
            margin: 0;
        }

        .task-category {
            margin-bottom: 24px;
        }

        .task-category-title {
            font-size: 14px;
            font-weight: 600;
            color: #6b7280;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 12px;
        }

        .task-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .task-item {
            padding: 12px 16px;
            background: #f9fafb;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid #e5e7eb;
        }

        .task-item:hover {
            background: #eff6ff;
            border-color: #2563eb;
            transform: translateX(4px);
        }

        .task-item-name {
            font-size: 14px;
            font-weight: 500;
            color: #111827;
            margin-bottom: 4px;
        }

        .task-item-desc {
            font-size: 12px;
            color: #6b7280;
        }

        .task-icon {
            width: 16px;
            height: 16px;
            margin-right: 8px;
            color: #2563eb;
        }
    </style>
</head>
<body>
    <div class="internal-sidebar">
        <div class="sidebar-header">
            <h2>INFINIFY</h2>
            <p>Internal Suite</p>
        </div>
        <nav class="sidebar-nav">
            <a href="home.html" class="sidebar-item">
                <div class="sidebar-item-icon">
                    <i data-lucide="home" style="width: 20px; height: 20px; color: #2563eb;"></i>
                </div>
                <span class="sidebar-item-text">Home</span>
            </a>
            <a href="workspace.html" class="sidebar-item">
                <div class="sidebar-item-icon">
                    <i data-lucide="message-square" style="width: 20px; height: 20px; color: #7c3aed;"></i>
                </div>
                <span class="sidebar-item-text">Workspace</span>
            </a>
            <a href="clientportal.html" class="sidebar-item">
                <div class="sidebar-item-icon">
                    <i data-lucide="briefcase" style="width: 20px; height: 20px; color: #d97706;"></i>
                </div>
                <span class="sidebar-item-text">Client Portal</span>
            </a>
            <a href="salesportal.html" class="sidebar-item">
                <div class="sidebar-item-icon">
                    <i data-lucide="dollar-sign" style="width: 20px; height: 20px; color: #059669;"></i>
                </div>
                <span class="sidebar-item-text">Sales Portal</span>
            </a>
            <a href="teams.html" class="sidebar-item">
                <div class="sidebar-item-icon">
                    <i data-lucide="users" style="width: 20px; height: 20px; color: #7c3aed;"></i>
                </div>
                <span class="sidebar-item-text">Teams</span>
            </a>
            <a href="support.html" class="sidebar-item">
                <div class="sidebar-item-icon">
                    <i data-lucide="life-buoy" style="width: 20px; height: 20px; color: #db2777;"></i>
                </div>
                <span class="sidebar-item-text">Support</span>
            </a>
            <a href="agents.html" class="sidebar-item active">
                <div class="sidebar-item-icon">
                    <i data-lucide="cpu" style="width: 20px; height: 20px; color: #2563eb;"></i>
                </div>
                <span class="sidebar-item-text">Agents</span>
            </a>
            <a href="impersonation.html" class="sidebar-item">
                <div class="sidebar-item-icon">
                    <i data-lucide="user-check" style="width: 20px; height: 20px; color: #dc2626;"></i>
                </div>
                <span class="sidebar-item-text">Impersonation</span>
            </a>
            <a href="tasks.html" class="sidebar-item">
                <div class="sidebar-item-icon">
                    <i data-lucide="check-square" style="width: 20px; height: 20px; color: #0891b2;"></i>
                </div>
                <span class="sidebar-item-text">Tasks</span>
            </a>
            <a href="toolcentre.html" class="sidebar-item">
                <div class="sidebar-item-icon">
                    <i data-lucide="wrench" style="width: 20px; height: 20px; color: #ea580c;"></i>
                </div>
                <span class="sidebar-item-text">Tool Centre</span>
            </a>
        </nav>
    </div>

    <div class="internal-container">
        <div class="main-content">
            <div class="page-header">
                <h1>AI Agents</h1>
                <p>Use AI agents to automate tasks and boost productivity</p>
            </div>

            <div class="agent-workspace">
                <div class="workspace-header">
                    <h2 class="workspace-title">Agent Workspace</h2>
                </div>
                <div class="agent-input-area">
                    <textarea placeholder="Describe the task you want the AI agent to complete...&#10;&#10;Example: Analyze customer feedback from the last quarter and generate a summary report with key insights and recommendations."></textarea>
                </div>
                <div class="agent-actions">
                    <button class="btn-primary">
                        <i data-lucide="play" style="width: 18px; height: 18px;"></i>
                        Launch
                    </button>
                    <button class="btn-secondary">
                        <i data-lucide="save" style="width: 18px; height: 18px;"></i>
                        Agent mapping
                    </button>
                    <button class="btn-secondary">
                        <i data-lucide="history" style="width: 18px; height: 18px;"></i>
                        Archived
                    </button>
                </div>
            </div>

            <div class="agent-ideas-section">
                <div class="ideas-header">
                    <h2 class="ideas-title">Running Agents</h2>
                    <span style="font-size: 12px; color: #6b7280;">Grow your agent library</span>
                </div>
                <div class="ideas-list" id="ideasList">
                    <div class="idea-item">
                        <span class="idea-text">Automated customer support response generator</span>
                        <div class="idea-actions">
                            <button class="btn-icon" title="Use this idea">
                                <i data-lucide="arrow-right" style="width: 16px; height: 16px; color: #2563eb;"></i>
                            </button>
                            <button class="btn-icon" title="Delete">
                                <i data-lucide="trash-2" style="width: 16px; height: 16px; color: #dc2626;"></i>
                            </button>
                        </div>
                    </div>
                    <div class="idea-item">
                        <span class="idea-text">Data analysis agent for sales reports</span>
                        <div class="idea-actions">
                            <button class="btn-icon" title="Use this idea">
                                <i data-lucide="arrow-right" style="width: 16px; height: 16px; color: #2563eb;"></i>
                            </button>
                            <button class="btn-icon" title="Delete">
                                <i data-lucide="trash-2" style="width: 16px; height: 16px; color: #dc2626;"></i>
                            </button>
                        </div>
                    </div>
                    <div class="idea-item">
                        <span class="idea-text">Content moderation assistant</span>
                        <div class="idea-actions">
                            <button class="btn-icon" title="Use this idea">
                                <i data-lucide="arrow-right" style="width: 16px; height: 16px; color: #2563eb;"></i>
                            </button>
                            <button class="btn-icon" title="Delete">
                                <i data-lucide="trash-2" style="width: 16px; height: 16px; color: #dc2626;"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tasks-sidebar">
            <div class="tasks-header">
                <h2 class="tasks-title">Available Tasks</h2>
                <p class="tasks-subtitle">Click a task to use it</p>
            </div>

            <div class="task-category">
                <div class="task-category-title">Data & Analytics</div>
                <div class="task-list">
                    <div class="task-item" data-task="Analyze customer data and generate insights">
                        <div class="task-item-name">
                            <i data-lucide="bar-chart-3" class="task-icon"></i>
                            Data Analysis
                        </div>
                        <div class="task-item-desc">Analyze datasets and generate reports</div>
                    </div>
                    <div class="task-item" data-task="Extract key metrics from reports">
                        <div class="task-item-name">
                            <i data-lucide="trending-up" class="task-icon"></i>
                            Metrics Extraction
                        </div>
                        <div class="task-item-desc">Pull important metrics from documents</div>
                    </div>
                    <div class="task-item" data-task="Generate data visualizations">
                        <div class="task-item-name">
                            <i data-lucide="pie-chart" class="task-icon"></i>
                            Data Visualization
                        </div>
                        <div class="task-item-desc">Create charts and graphs</div>
                    </div>
                </div>
            </div>

            <div class="task-category">
                <div class="task-category-title">Content & Writing</div>
                <div class="task-list">
                    <div class="task-item" data-task="Generate professional email responses">
                        <div class="task-item-name">
                            <i data-lucide="mail" class="task-icon"></i>
                            Email Generation
                        </div>
                        <div class="task-item-desc">Create email content</div>
                    </div>
                    <div class="task-item" data-task="Summarize long documents">
                        <div class="task-item-name">
                            <i data-lucide="file-text" class="task-icon"></i>
                            Document Summary
                        </div>
                        <div class="task-item-desc">Condense lengthy content</div>
                    </div>
                    <div class="task-item" data-task="Create marketing copy">
                        <div class="task-item-name">
                            <i data-lucide="pen-tool" class="task-icon"></i>
                            Content Creation
                        </div>
                        <div class="task-item-desc">Write marketing materials</div>
                    </div>
                </div>
            </div>

            <div class="task-category">
                <div class="task-category-title">Customer Support</div>
                <div class="task-list">
                    <div class="task-item" data-task="Respond to customer inquiries">
                        <div class="task-item-name">
                            <i data-lucide="message-circle" class="task-icon"></i>
                            Inquiry Response
                        </div>
                        <div class="task-item-desc">Answer customer questions</div>
                    </div>
                    <div class="task-item" data-task="Analyze customer feedback">
                        <div class="task-item-name">
                            <i data-lucide="message-square" class="task-icon"></i>
                            Feedback Analysis
                        </div>
                        <div class="task-item-desc">Process and analyze reviews</div>
                    </div>
                    <div class="task-item" data-task="Generate support documentation">
                        <div class="task-item-name">
                            <i data-lucide="book-open" class="task-icon"></i>
                            Documentation
                        </div>
                        <div class="task-item-desc">Create help articles</div>
                    </div>
                </div>
            </div>

            <div class="task-category">
                <div class="task-category-title">Automation</div>
                <div class="task-list">
                    <div class="task-item" data-task="Schedule and manage tasks">
                        <div class="task-item-name">
                            <i data-lucide="calendar" class="task-icon"></i>
                            Task Scheduling
                        </div>
                        <div class="task-item-desc">Automate task management</div>
                    </div>
                    <div class="task-item" data-task="Process and categorize files">
                        <div class="task-item-name">
                            <i data-lucide="folder" class="task-icon"></i>
                            File Processing
                        </div>
                        <div class="task-item-desc">Organize and categorize files</div>
                    </div>
                    <div class="task-item" data-task="Monitor system health">
                        <div class="task-item-name">
                            <i data-lucide="activity" class="task-icon"></i>
                            System Monitoring
                        </div>
                        <div class="task-item-desc">Track system performance</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            if (window.lucide) lucide.createIcons();

            // Load agent tasks from localStorage
            loadAgentTasks();

            // Task sidebar - click to add to workspace
            const taskItems = document.querySelectorAll('.task-item');
            const workspaceTextarea = document.querySelector('.agent-input-area textarea');

            taskItems.forEach(item => {
                item.addEventListener('click', () => {
                    const taskText = item.dataset.task;
                    if (workspaceTextarea) {
                        workspaceTextarea.value = taskText;
                        workspaceTextarea.focus();
                    }
                });
            });

            // Agent ideas
            const ideasList = document.getElementById('ideasList');

            function addIdea(text) {
                const ideaItem = document.createElement('div');
                ideaItem.className = 'idea-item';
                
                const ideaText = document.createElement('span');
                ideaText.className = 'idea-text';
                ideaText.textContent = text;
                
                const ideaActions = document.createElement('div');
                ideaActions.className = 'idea-actions';
                
                const useBtn = document.createElement('button');
                useBtn.className = 'btn-icon';
                useBtn.title = 'Use this idea';
                useBtn.innerHTML = '<i data-lucide="arrow-right" style="width: 16px; height: 16px; color: #2563eb;"></i>';
                useBtn.addEventListener('click', () => {
                    if (workspaceTextarea) {
                        workspaceTextarea.value = text;
                        workspaceTextarea.focus();
                    }
                });
                
                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'btn-icon';
                deleteBtn.title = 'Delete';
                deleteBtn.innerHTML = '<i data-lucide="trash-2" style="width: 16px; height: 16px; color: #dc2626;"></i>';
                deleteBtn.addEventListener('click', () => {
                    ideaItem.remove();
                    lucide.createIcons();
                });
                
                ideaActions.appendChild(useBtn);
                ideaActions.appendChild(deleteBtn);
                ideaItem.appendChild(ideaText);
                ideaItem.appendChild(ideaActions);
                
                ideasList.insertBefore(ideaItem, ideasList.firstChild);
                lucide.createIcons();
            }

            // Use idea function
            window.useIdea = function(text) {
                if (workspaceTextarea) {
                    workspaceTextarea.value = text;
                    workspaceTextarea.focus();
                }
            };

            // Delete existing ideas
            document.querySelectorAll('.idea-item .btn-icon').forEach(btn => {
                if (btn.querySelector('[data-lucide="trash-2"]')) {
                    btn.addEventListener('click', (e) => {
                        if (e.target.closest('.btn-icon').querySelector('[data-lucide="trash-2"]')) {
                            e.target.closest('.idea-item').remove();
                        }
                    });
                }
            });

            // Use existing ideas
            document.querySelectorAll('.idea-item .btn-icon').forEach(btn => {
                if (btn.querySelector('[data-lucide="arrow-right"]')) {
                    btn.addEventListener('click', (e) => {
                        if (e.target.closest('.btn-icon').querySelector('[data-lucide="arrow-right"]')) {
                            const ideaText = e.target.closest('.idea-item').querySelector('.idea-text').textContent;
                            if (workspaceTextarea) {
                                workspaceTextarea.value = ideaText;
                                workspaceTextarea.focus();
                            }
                        }
                    });
                }
            });
        });

        function loadAgentTasks() {
            const agentTasks = JSON.parse(localStorage.getItem('agentTasks')) || [];
            const tasksSidebar = document.querySelector('.tasks-sidebar .task-category:last-child');
            
            if (agentTasks.length > 0) {
                // Check if "Agent Tasks" category already exists
                let agentTasksCategory = document.querySelector('.task-category[data-category="agent-tasks"]');
                
                if (!agentTasksCategory) {
                    // Create new category for agent tasks
                    agentTasksCategory = document.createElement('div');
                    agentTasksCategory.className = 'task-category';
                    agentTasksCategory.setAttribute('data-category', 'agent-tasks');
                    agentTasksCategory.innerHTML = `
                        <div class="task-category-title">Agent Tasks</div>
                        <div class="task-list" id="agentTasksList"></div>
                    `;
                    
                    // Insert before the last category (Automation)
                    const automationCategory = document.querySelector('.task-category:last-child');
                    automationCategory.parentNode.insertBefore(agentTasksCategory, automationCategory);
                }
                
                const agentTasksList = document.getElementById('agentTasksList');
                agentTasksList.innerHTML = '';
                
                agentTasks.forEach(task => {
                    const taskItem = document.createElement('div');
                    taskItem.className = 'task-item';
                    taskItem.dataset.task = task.description || task.name;
                    taskItem.innerHTML = `
                        <div class="task-item-name">
                            <i data-lucide="sparkles" class="task-icon"></i>
                            ${task.name}
                        </div>
                        <div class="task-item-desc">${task.description || 'No description'}</div>
                    `;
                    taskItem.addEventListener('click', () => {
                        const workspaceTextarea = document.querySelector('.agent-input-area textarea');
                        if (workspaceTextarea) {
                            workspaceTextarea.value = task.description || task.name;
                            workspaceTextarea.focus();
                        }
                    });
                    agentTasksList.appendChild(taskItem);
                });
                
                if (window.lucide) lucide.createIcons();
            } else {
                // Remove agent tasks category if no tasks
                const agentTasksCategory = document.querySelector('.task-category[data-category="agent-tasks"]');
                if (agentTasksCategory) {
                    agentTasksCategory.remove();
                }
            }
        }

        // Listen for storage changes to update agent tasks in real-time
        window.addEventListener('storage', (e) => {
            if (e.key === 'agentTasks') {
                loadAgentTasks();
            }
        });

        // Also check periodically for updates (in case same window)
        setInterval(() => {
            loadAgentTasks();
        }, 1000);
    </script>
</body>
</html>

